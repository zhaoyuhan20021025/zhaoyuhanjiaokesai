/*
 * @Author: wangchen35
 * @Date: 2021-08-07 16:54:31
 * @LastEditors: wangchen35
 * @LastEditTime: 2023-01-12 17:32:49
 * @Description: file content
 */
import {
    Vector3,
    InstancedMesh,
} from 'bmap-three';

export class TrafficInstancedObject extends InstancedMesh {
    constructor() {
        super();
        this.needTrans = true;
        this.point = new Vector3();
    }

    afterAddToEngine(engine) {
        this.engine = engine;
    }

    onBeforeScenePrepareRender() {
        if (this.needTrans) {
            this.point.copy(this.position);
            const [setX, setY] = this.engine.map.projectCoordinates([this.position.x, this.position.y]);
            this.position.x = setX;
            this.position.y = setY;
            this.needTrans = false;
        }
    }

}
